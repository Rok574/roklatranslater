<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>iOS 18 Web Home</title>

<style>
body{
margin:0;
font-family:-apple-system,BlinkMacSystemFont,sans-serif;
background-size:cover;
background-position:center;
background-repeat:no-repeat;
background-attachment:fixed;
overflow:hidden;
color:white;
}

/* EDIT DONE BUTTON */
.done-btn{
position:fixed;
top:20px;
right:20px;
font-size:17px;
font-weight:600;
color:#0a84ff;
display:none;
z-index:20;
}

/* PAGES */
.pages{
display:flex;
height:100vh;
width:100vw;
overflow-x:auto;
scroll-snap-type:x mandatory;
scroll-behavior:smooth;
}

.page{
flex:0 0 100vw;
scroll-snap-align:start;
display:grid;
grid-template-columns:repeat(4,1fr);
gap:30px;
padding:90px 25px 170px;
box-sizing:border-box;
}

/* APP */
.app{
text-align:center;
font-size:12px;
text-shadow:0 2px 8px rgba(0,0,0,0.7);
position:relative;
}

.icon{
width:74px;
height:74px;
border-radius:22px;
background:rgba(255,255,255,0.25);
backdrop-filter:blur(30px);
display:flex;
align-items:center;
justify-content:center;
margin:auto;
overflow:hidden;
transition:transform .15s;
}

.icon img{
width:100%;
height:100%;
object-fit:cover;
}

/* DELETE BUTTON */
.delete-btn{
position:absolute;
top:-8px;
left:8px;
width:22px;
height:22px;
border-radius:50%;
background:#ff3b30;
color:white;
font-size:14px;
display:none;
align-items:center;
justify-content:center;
}

/* JIGGLE */
.jiggle{
animation:jiggle .15s infinite alternate;
}

@keyframes jiggle{
from{transform:rotate(-2deg);}
to{transform:rotate(2deg);}
}

/* DOCK */
.dock{
position:fixed;
bottom:35px;
left:50%;
transform:translateX(-50%);
width:92%;
height:95px;
border-radius:32px;
background:rgba(255,255,255,0.25);
backdrop-filter:blur(35px);
display:flex;
justify-content:space-evenly;
align-items:center;
}

/* DOTS */
.dots{
position:fixed;
bottom:135px;
width:100%;
text-align:center;
}

.dot{
width:7px;
height:7px;
margin:0 4px;
border-radius:50%;
display:inline-block;
background:rgba(255,255,255,0.4);
}
.dot.active{background:white;}

/* FULLSCREEN APP */
.fullscreen{
position:fixed;
inset:0;
background:#1c1c1e;
display:none;
flex-direction:column;
padding-top:70px;
z-index:30;
}

/* SETTINGS (iOS 18 style) */
.settings-title{
font-size:28px;
font-weight:700;
padding:0 20px 20px;
}

.settings-section{
background:#2c2c2e;
margin:0 15px 20px;
border-radius:18px;
overflow:hidden;
}

.settings-item{
padding:18px;
border-bottom:1px solid #3a3a3c;
}
.settings-item:last-child{
border-bottom:none;
}

.home-bar{
position:fixed;
bottom:8px;
left:50%;
transform:translateX(-50%);
width:140px;
height:5px;
border-radius:4px;
background:white;
z-index:40;
}
</style>
</head>

<body>

<div class="done-btn" id="doneBtn" onclick="exitEdit()">Done</div>
<div class="pages" id="pages"></div>
<div class="dots" id="dots"></div>
<div class="dock" id="dock"></div>

<!-- SETTINGS -->
<div class="fullscreen" id="settingsApp">
<div class="settings-title">Settings</div>

<div class="settings-section">
<div class="settings-item" onclick="document.getElementById('bgUpload').click()">Change Wallpaper</div>
<div class="settings-item" onclick="resetLayout()">Reset Layout</div>
</div>

</div>

<input type="file" id="bgUpload" accept="image/*" hidden>
<div class="home-bar" onclick="closeApps()"></div>

<script>
const pages=document.getElementById("pages");
const dock=document.getElementById("dock");
const dots=document.getElementById("dots");
const doneBtn=document.getElementById("doneBtn");
const settingsApp=document.getElementById("settingsApp");

let editing=false;
let holdTimer;

let apps=JSON.parse(localStorage.getItem("apps")||"[]");

const defaultWallpaper="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRqbDxP4DYF4o2HgMeEuMvponVEvINt1FrCaMX8r5HOCmk9eIwBQP7YpJI&s=10";

function setWallpaper(url){
document.body.style.backgroundImage=`url('${url}')`;
localStorage.setItem("wallpaper",url);
}

function loadWallpaper(){
setWallpaper(localStorage.getItem("wallpaper")||defaultWallpaper);
}

function save(){
localStorage.setItem("apps",JSON.stringify(apps));
}

function enterEdit(){
editing=true;
doneBtn.style.display="block";
document.querySelectorAll(".icon").forEach(i=>i.classList.add("jiggle"));
document.querySelectorAll(".delete-btn").forEach(d=>d.style.display="flex");
}

function exitEdit(){
editing=false;
doneBtn.style.display="none";
document.querySelectorAll(".icon").forEach(i=>i.classList.remove("jiggle"));
document.querySelectorAll(".delete-btn").forEach(d=>d.style.display="none");
}

function createApp(app,index){
const el=document.createElement("div");
el.className="app";
el.draggable=true;

const del=document.createElement("div");
del.className="delete-btn";
del.innerText="âˆ’";
del.onclick=(e)=>{
e.stopPropagation();
apps.splice(index,1);
save();
render();
};
el.appendChild(del);

const icon=document.createElement("div");
icon.className="icon";
icon.innerHTML=`<img src="${app.icon}">`;
el.appendChild(icon);

el.innerHTML+=`<div>${app.name}</div>`;

el.onmousedown=()=>{
holdTimer=setTimeout(()=>enterEdit(),500);
};
el.onmouseup=()=>clearTimeout(holdTimer);

el.onclick=()=>{
if(editing)return;
if(app.name==="Settings")settingsApp.style.display="flex";
else window.open(app.url,"_blank");
};

el.ondragstart=e=>{
if(!editing)return e.preventDefault();
e.dataTransfer.setData("text/plain",index);
};

return el;
}

function render(){
pages.innerHTML="";
dots.innerHTML="";

const perPage=16;
for(let i=0;i<apps.length;i+=perPage){
const page=document.createElement("div");
page.className="page";
apps.slice(i,i+perPage).forEach((a,idx)=>{
page.appendChild(createApp(a,i+idx));
});
pages.appendChild(page);
}

const total=Math.ceil(apps.length/perPage);
for(let i=0;i<total;i++){
const dot=document.createElement("span");
dot.className="dot";
if(i===0)dot.classList.add("active");
dots.appendChild(dot);
}

pages.onscroll=()=>{
const index=Math.round(pages.scrollLeft/window.innerWidth);
document.querySelectorAll(".dot").forEach((d,i)=>{
d.classList.toggle("active",i===index);
});
};
}

function closeApps(){
settingsApp.style.display="none";
}

function resetLayout(){
localStorage.removeItem("apps");
location.reload();
}

document.getElementById("bgUpload").addEventListener("change",function(){
const file=this.files[0];
const reader=new FileReader();
reader.onload=e=>setWallpaper(e.target.result);
if(file)reader.readAsDataURL(file);
});

if(apps.length===0){
apps=[
{name:"Chrome",url:"https://google.com",icon:"https://cdn.jim-nielsen.com/ios/512/chrome-web-browser-by-google-2016-01-25.png?rf=512"},
{name:"Settings",url:"#",icon:"file_00000000bfa071fdb19690b2a2813e8f"}
];
save();
}

loadWallpaper();
render();
</script>

</body>
</html>
