<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>iOS 18 Web Home</title>

<style>
body{
margin:0;
font-family:-apple-system,BlinkMacSystemFont,sans-serif;
background-size:cover;
background-position:center;
background-repeat:no-repeat;
background-attachment:fixed;
overflow:hidden;
color:white;
}

/* DONE BUTTON */
.done-btn{
position:fixed;
top:20px;
right:20px;
font-size:17px;
font-weight:600;
color:#0a84ff;
display:none;
z-index:50;
}

/* PAGES */
.pages{
display:flex;
height:100vh;
width:100vw;
overflow-x:auto;
scroll-snap-type:x mandatory;
scroll-behavior:smooth;
}

.page{
flex:0 0 100vw;
scroll-snap-align:start;
display:grid;
grid-template-columns:repeat(4,1fr);
gap:30px;
padding:90px 25px 170px;
box-sizing:border-box;
}

/* APP */
.app{
text-align:center;
font-size:12px;
text-shadow:0 2px 8px rgba(0,0,0,0.7);
position:relative;
}

.icon{
width:74px;
height:74px;
border-radius:22px;
background:rgba(255,255,255,0.25);
backdrop-filter:blur(30px);
display:flex;
align-items:center;
justify-content:center;
margin:auto;
overflow:hidden;
transition:transform .15s;
}

.icon img{
width:100%;
height:100%;
object-fit:cover;
}

/* DELETE */
.delete-btn{
position:absolute;
top:-8px;
left:8px;
width:22px;
height:22px;
border-radius:50%;
background:#ff3b30;
display:none;
align-items:center;
justify-content:center;
font-size:14px;
}

.jiggle{
animation:jiggle .15s infinite alternate;
}

@keyframes jiggle{
from{transform:rotate(-2deg);}
to{transform:rotate(2deg);}
}

/* DOTS */
.dots{
position:fixed;
bottom:135px;
width:100%;
text-align:center;
}

.dot{
width:7px;
height:7px;
margin:0 4px;
border-radius:50%;
display:inline-block;
background:rgba(255,255,255,0.4);
}
.dot.active{background:white;}

/* FULLSCREEN APP */
.fullscreen{
position:fixed;
inset:0;
background:#1c1c1e;
display:none;
flex-direction:column;
padding:80px 20px 40px;
z-index:60;
}

/* SETTINGS STYLE */
.title{
font-size:28px;
font-weight:700;
margin-bottom:25px;
}

.card{
background:#2c2c2e;
padding:18px;
border-radius:18px;
margin-bottom:20px;
}

input{
width:100%;
padding:14px;
border-radius:14px;
border:none;
margin-top:12px;
background:#3a3a3c;
color:white;
}

button{
width:100%;
padding:14px;
border-radius:14px;
border:none;
background:#0a84ff;
color:white;
margin-top:15px;
font-size:16px;
}

.preview{
text-align:center;
margin-top:20px;
}

.preview img{
width:80px;
height:80px;
border-radius:22px;
margin-bottom:10px;
}

.home-bar{
position:fixed;
bottom:8px;
left:50%;
transform:translateX(-50%);
width:140px;
height:5px;
border-radius:4px;
background:white;
z-index:70;
}
</style>
</head>

<body>

<div class="done-btn" id="doneBtn" onclick="exitEdit()">Done</div>
<div class="pages" id="pages"></div>
<div class="dots" id="dots"></div>

<!-- SETTINGS -->
<div class="fullscreen" id="settingsApp">
<div class="title">Settings</div>
<div class="card" onclick="document.getElementById('bgUpload').click()">Change Wallpaper</div>
<div class="card" onclick="openAdder()">Add Web App</div>
</div>

<!-- WEB APP ADDER -->
<div class="fullscreen" id="adderApp">
<div class="title">Add Web App</div>
<input id="urlInput" placeholder="Enter website link">
<button onclick="fetchSite()">Preview</button>

<div class="preview" id="previewArea" style="display:none;">
<img id="previewIcon">
<input id="previewName">
<button onclick="confirmAdd()">Add to Home Screen</button>
</div>
</div>

<input type="file" id="bgUpload" accept="image/*" hidden>
<div class="home-bar" onclick="closeApps()"></div>

<script>
const pages=document.getElementById("pages");
const dots=document.getElementById("dots");
const doneBtn=document.getElementById("doneBtn");
const settingsApp=document.getElementById("settingsApp");
const adderApp=document.getElementById("adderApp");

let editing=false;
let holdTimer;
let apps=JSON.parse(localStorage.getItem("apps")||"[]");

function save(){
localStorage.setItem("apps",JSON.stringify(apps));
}

function setWallpaper(url){
document.body.style.backgroundImage=`url('${url}')`;
localStorage.setItem("wallpaper",url);
}

function loadWallpaper(){
setWallpaper(localStorage.getItem("wallpaper")||
"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRqbDxP4DYF4o2HgMeEuMvponVEvINt1FrCaMX8r5HOCmk9eIwBQP7YpJI&s=10");
}

function enterEdit(){
editing=true;
doneBtn.style.display="block";
document.querySelectorAll(".icon").forEach(i=>i.classList.add("jiggle"));
document.querySelectorAll(".delete-btn").forEach(d=>d.style.display="flex");
}

function exitEdit(){
editing=false;
doneBtn.style.display="none";
document.querySelectorAll(".icon").forEach(i=>i.classList.remove("jiggle"));
document.querySelectorAll(".delete-btn").forEach(d=>d.style.display="none");
}

function createApp(app,index){
const el=document.createElement("div");
el.className="app";
el.draggable=true;

const del=document.createElement("div");
del.className="delete-btn";
del.innerText="âˆ’";
del.onclick=(e)=>{
e.stopPropagation();
apps.splice(index,1);
save();
render();
};
el.appendChild(del);

const icon=document.createElement("div");
icon.className="icon";
icon.innerHTML=`<img src="${app.icon}">`;
el.appendChild(icon);

el.innerHTML+=`<div>${app.name}</div>`;

el.onmousedown=()=>{
holdTimer=setTimeout(()=>enterEdit(),500);
};
el.onmouseup=()=>clearTimeout(holdTimer);

el.onclick=()=>{
if(editing)return;
if(app.name==="Settings")settingsApp.style.display="flex";
else window.open(app.url,"_blank");
};

return el;
}

function render(){
pages.innerHTML="";
dots.innerHTML="";

const perPage=16;
for(let i=0;i<apps.length;i+=perPage){
const page=document.createElement("div");
page.className="page";
apps.slice(i,i+perPage).forEach((a,idx)=>{
page.appendChild(createApp(a,i+idx));
});
pages.appendChild(page);
}

const total=Math.ceil(apps.length/perPage);
for(let i=0;i<total;i++){
const dot=document.createElement("span");
dot.className="dot";
if(i===0)dot.classList.add("active");
dots.appendChild(dot);
}

pages.onscroll=()=>{
const index=Math.round(pages.scrollLeft/window.innerWidth);
document.querySelectorAll(".dot").forEach((d,i)=>{
d.classList.toggle("active",i===index);
});
};
}

/* WEB APP ADDER */

function openAdder(){
settingsApp.style.display="none";
adderApp.style.display="flex";
}

async function fetchSite(){
let url=document.getElementById("urlInput").value;
if(!url.startsWith("http"))url="https://"+url;

const domain=new URL(url).hostname;

const title=domain.replace("www.","");
const icon="https://www.google.com/s2/favicons?sz=128&domain="+domain;

document.getElementById("previewIcon").src=icon;
document.getElementById("previewName").value=title;
document.getElementById("previewArea").style.display="block";
}

function confirmAdd(){
let name=document.getElementById("previewName").value;
let url=document.getElementById("urlInput").value;
if(!url.startsWith("http"))url="https://"+url;
const domain=new URL(url).hostname;

apps.push({
name:name,
url:url,
icon:"https://www.google.com/s2/favicons?sz=128&domain="+domain
});
save();
location.reload();
}

function closeApps(){
settingsApp.style.display="none";
adderApp.style.display="none";
}

document.getElementById("bgUpload").addEventListener("change",function(){
const file=this.files[0];
const reader=new FileReader();
reader.onload=e=>setWallpaper(e.target.result);
if(file)reader.readAsDataURL(file);
});

if(apps.length===0){
apps=[
{name:"Chrome",url:"https://google.com",icon:"https://cdn.jim-nielsen.com/ios/512/chrome-web-browser-by-google-2016-01-25.png?rf=512"},
{name:"Settings",url:"#",icon:"file_00000000bfa071fdb19690b2a2813e8f"}
];
save();
}

loadWallpaper();
render();
</script>

</body>
</html>
