<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>iOS / iPadOS Home</title>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<link href="https://fonts.cdnfonts.com/css/sf-pro-display" rel="stylesheet">
<style>
* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
body { margin:0; font-family:'SF Pro Display',-apple-system,sans-serif; background:black; overflow:hidden; }
#wallpaper { position:fixed; inset:0; background:#000 center/cover no-repeat; z-index:0; }

/* iPhone layout */
body.iphone .app img { width:64px; height:64px; border-radius:14px; }
body.iphone .app span { font-size:12px; margin-top:6px; }

/* iPad layout */
body.ipad .app img { width:72px; height:72px; border-radius:18px; }
body.ipad .app span { font-size:13px; margin-top:8px; }

/* Shared */
.app {
  text-align:center;
  color:white;
  cursor:pointer;
  position:relative;
  transition:transform .15s;
  display:flex;
  flex-direction:column;
  align-items:center;
}

.app span {
  display:block;
  max-width:100%;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

.app:active { transform:scale(0.92); }
.app.dragging { opacity:0.6; transform:scale(1.12); z-index:10; }

.delete-x {
  position:absolute; top:-8px; right:-8px;
  width:24px; height:24px;
  background:#ff3b30; color:white;
  border-radius:50%;
  font-size:19px; font-weight:bold;
  display:none; align-items:center; justify-content:center;
  box-shadow:0 2px 8px rgba(0,0,0,0.5);
}

body.edit-mode .app.is-custom .delete-x { display:flex; }
body.edit-mode .app { animation:wiggle 0.8s infinite; }

@keyframes wiggle {
  0%,100%{transform:rotate(-3deg);}
  25%{transform:rotate(3deg);}
  50%{transform:rotate(-2deg);}
  75%{transform:rotate(2deg);}
}

#home {
  position:relative; z-index:1;
  height: calc(100vh - 220px);
  display:flex; overflow-x:auto;
  scroll-snap-type:x mandatory;
  scroll-behavior:smooth;
  -webkit-overflow-scrolling:touch;
}

.page {
  flex:0 0 100%;
  height:100%;
  padding:20px;
  scroll-snap-align:start;
  display:grid;
  grid-template-columns:repeat(var(--cols),1fr);
  gap:var(--gap);
  align-content:start;
  overflow-y:auto;
}

#dock {
  position:fixed;
  bottom:20px;
  left:50%;
  transform:translateX(-50%);
  background:rgba(255,255,255,.25);
  backdrop-filter:blur(20px);
  border-radius:28px;
  display:flex;
  justify-content:center;
  z-index:2;
}

body.iphone #dock { width:min(420px, calc(100% - 40px)); padding:14px 20px; gap:24px; }
body.ipad #dock { width:min(620px, calc(100% - 48px)); padding:18px 28px; gap:32px; }

#done {
  position:fixed; top:24px; right:24px;
  background:rgba(0,122,255,0.85);
  color:white;
  padding:7px 20px;
  border-radius:30px;
  font-size:17px;
  font-weight:600;
  display:none;
  z-index:30;
  cursor:pointer;
}

/* Toast */
#toast{
  position:fixed;
  bottom:140px;
  left:50%;
  transform:translateX(-50%);
  background:rgba(0,0,0,0.85);
  color:white;
  padding:12px 18px;
  border-radius:20px;
  font-size:14px;
  opacity:0;
  transition:opacity .3s ease, transform .3s ease;
  z-index:1000;
  pointer-events:none;
}

</style>
</head>
<body>

<div id="wallpaper"></div>
<div id="home"></div>
<div id="dock"></div>
<div id="done" onclick="exitEditMode()">Done</div>
<div id="toast">App Added</div>

<script>

// APPS
let apps = JSON.parse(localStorage.getItem("apps")) || [
  { name: "Notes", id: "notes", icon: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRC4wjEB3rsNICYcrehZUz4hvDbHg4LhMh_Xw&s", isCustom: false },
  { name: "Calculator", id: "calculator", icon: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS8Je98ZqXhgWmbiohpPpuBO2oNgajOWG3mHw&s", isCustom: false },
  { name: "Chrome", id: "browser", icon: "https://is1-ssl.mzstatic.com/image/thumb/PurpleSource221/v4/e6/16/cd/e616cd30-09be-220e-fc18-d1ffea0ab74e/Placeholder.mill/200x200bb-75.webp", isCustom: false },
  { name: "Settings", id: "settings", icon: "https://i.imgur.com/crghH6U.png", isCustom: false }
];

const home = document.getElementById("home");
const dock = document.getElementById("dock");

function createAppEl(app){
  const el = document.createElement("div");
  el.className="app";
  if(app.isCustom) el.classList.add("is-custom");
  el.dataset.id = app.id || app.url || app.name;

  el.innerHTML = `<img src="${app.icon}"><span>${app.name}</span>`;

  if(app.isCustom){
    const x=document.createElement("div");
    x.className="delete-x";
    x.textContent="Ã—";
    x.onclick=e=>{
      e.stopImmediatePropagation();
      const id=app.id||app.url||app.name;
      apps=apps.filter(a=>(a.id||a.url||a.name)!==id);
      localStorage.setItem("apps",JSON.stringify(apps));
      render();
    };
    el.appendChild(x);
  }

  el.onclick=()=>{
    if(app.id) alert(app.name+" opened");
    else if(app.url) window.open(app.url,"_blank");
  };

  return el;
}

function render(){
  dock.innerHTML="";
  home.innerHTML="";

  apps.slice(0,4).forEach(a=>dock.appendChild(createAppEl(a)));
  const page=document.createElement("div");
  page.className="page";
  page.style.setProperty('--cols',4);
  page.style.setProperty('--gap','22px');

  apps.slice(4).forEach(a=>page.appendChild(createAppEl(a)));
  home.appendChild(page);
}

function showToast(){
  const t=document.getElementById("toast");
  t.style.opacity="1";
  t.style.transform="translateX(-50%) translateY(-10px)";
  setTimeout(()=>{
    t.style.opacity="0";
    t.style.transform="translateX(-50%)";
  },2000);
}

render();
</script>

</body>
</html>
